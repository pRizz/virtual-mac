---
phase: 02-ui-polish-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - styles.css
  - src/window_manager.rs
autonomous: true

must_haves:
  truths:
    - "All dock icons appear the same base size before magnification"
    - "Finder window has no visible white padding/border inside content area"
    - "Calculator buttons and display are fully visible without clipping"
  artifacts:
    - path: "styles.css"
      provides: "Dock icon sizing fix, Finder background fix, Calculator layout fix"
      contains: ".dock-icon"
    - path: "src/window_manager.rs"
      provides: "Calculator window dimensions"
      contains: "Calculator"
  key_links:
    - from: "styles.css"
      to: "dock.rs"
      via: "CSS class dock-icon"
      pattern: "dock-icon"
    - from: "styles.css"
      to: "finder.rs"
      via: "CSS class finder"
      pattern: "\\.finder"
    - from: "styles.css"
      to: "calculator.rs"
      via: "CSS class calculator"
      pattern: "\\.calculator"
---

<objective>
Fix three UI polish issues: dock icon sizing, Finder white padding, and Calculator clipping.

Purpose: Complete Phase 02 of v1.1 System Polish milestone by addressing visual bugs that affect the authenticity of the macOS simulation.

Output: Clean dock with uniform icons, Finder without visual artifacts, Calculator with fully visible content.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-window-system-fixes/01-01-SUMMARY.md

# Key files to modify
@styles.css
@src/window_manager.rs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix dock icon sizing for uniform appearance</name>
  <files>styles.css</files>
  <action>
The dock icons use emoji characters which render at different apparent sizes. The Terminal icon (keyboard emoji) appears smaller than others.

Fix by ensuring consistent text rendering in dock icons:
1. Add explicit font-family to `.dock-icon` that normalizes emoji rendering across icons
2. Set `line-height: 1` to prevent varying line heights from affecting icon positioning
3. Consider using `text-align: center` and `vertical-align: middle` for consistent centering

Look for the `.dock-icon` class in styles.css (around line 527-543).

The fix should ensure the emoji characters fill the 48x48 icon space consistently regardless of the specific emoji used.

Note: The current font-size is 28px. If emojis still appear inconsistent, consider increasing to 32px to better fill the icon space.
  </action>
  <verify>
Build with `trunk build` and visually inspect dock icons in browser.
All icons (Finder, Safari, Messages, Mail, Photos, Music, Notes, Calendar, TextEdit, Calculator, Settings, Terminal, Downloads, Trash) should appear the same base size.
  </verify>
  <done>
FIX-004.1: All dock icons have consistent base size.
FIX-004.2: Magnification effect applies uniformly to all icons.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix Finder white padding/border</name>
  <files>styles.css</files>
  <action>
The Finder window shows white padding/border inside the content area. This is caused by the window-content background bleeding through the rounded corners.

Fix by ensuring the Finder fills its container completely:
1. Locate `.finder` class (around line 730-737)
2. Remove or adjust the `border-radius: 0 0 10px 10px` - the parent window already has rounded corners
3. Ensure background color matches throughout
4. Check if `.window-content.finder-content` needs `border-radius: 0` as well

The `.window-content.finder-content` class already has `padding: 0` and `background: transparent`.
The issue is likely the `.finder` div having its own border-radius that creates a gap.

Fix: Set `.finder` to `border-radius: 0` so it fills the window-content completely. The parent window's border-radius will handle the corner rounding.
  </action>
  <verify>
Build with `trunk build` and open a Finder window.
No white border/padding should be visible inside the Finder window.
Content should extend to the window edges cleanly.
  </verify>
  <done>
FIX-005.1: No white padding/border in Finder content area.
FIX-005.2: Finder background matches macOS Finder appearance.
  </done>
</task>

<task type="auto">
  <name>Task 3: Fix Calculator content clipping</name>
  <files>styles.css, src/window_manager.rs</files>
  <action>
The Calculator window (250x420px) may clip content. The calculator has:
- Title bar: 28px
- Display: min-height 100px
- Buttons: 5 rows with 12px gaps

Calculate required height:
- Display: ~100px (min-height)
- Buttons: 5 rows x 60px (aspect-ratio 1:1 in grid) + 4 gaps x 12px = 300px + 48px = 348px
- Padding: 12px top + 12px bottom = 24px
- Total content: ~472px

With 28px titlebar, total window needs ~500px but is only 420px.

Two approaches:
1. Increase Calculator window height in window_manager.rs from 420.0 to 500.0
2. Reduce button sizes in CSS

Preferred: Increase window height to 500.0 in window_manager.rs (lines 131, 226):
- Line 131: Initial window creation
- Line 226: Default dimensions for new Calculator windows

This preserves the authentic calculator button sizes.

Also verify `.window-content.calculator-content` has `overflow: hidden` (already present at line 1347) to prevent scrollbars.
  </action>
  <verify>
Build with `trunk build` and open Calculator.
All calculator buttons should be fully visible.
Display should not be clipped.
No scrollbars should appear.
Test by clicking all buttons - they should all respond.
  </verify>
  <done>
FIX-006.1: All calculator buttons fully visible.
FIX-006.2: Display area not clipped.
FIX-006.3: Window properly sized for content.
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. `trunk build` completes without errors
2. Open the application in browser
3. Verify dock icons are uniformly sized
4. Open Finder - no white padding visible
5. Open Calculator - all content visible, buttons clickable
</verification>

<success_criteria>
- All dock icons have the same apparent base size (FIX-004)
- Finder window has no white border/padding (FIX-005)
- Calculator displays all buttons and the result display without clipping (FIX-006)
- Build succeeds with `trunk build`
</success_criteria>

<output>
After completion, create `.planning/phases/02-ui-polish-fixes/02-01-SUMMARY.md`
</output>
