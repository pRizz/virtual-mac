---
phase: 05-about-virtualmac
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/system_state.rs
  - src/menu_bar.rs
  - src/modals.rs
  - src/styles.css
autonomous: true

must_haves:
  truths:
    - "Apple menu 'VirtualMac' submenu has 'About VirtualMac' item that opens dialog"
    - "About VirtualMac dialog is draggable by its titlebar"
    - "Dialog closes via X button only (not click-outside)"
    - "Dialog shows version, tagline, links, and credits"
    - "External links open in new tab"
  artifacts:
    - path: "src/system_state.rs"
      provides: "AboutVirtualMac modal type variant"
      contains: "AboutVirtualMac"
    - path: "src/menu_bar.rs"
      provides: "Handler for About VirtualMac menu item"
      contains: "on_about_virtualmac"
    - path: "src/modals.rs"
      provides: "AboutVirtualMacDialog component with drag behavior"
      contains: "AboutVirtualMacDialog"
    - path: "src/styles.css"
      provides: "Dialog styling"
      contains: ".about-virtualmac"
  key_links:
    - from: "src/menu_bar.rs"
      to: "src/system_state.rs"
      via: "show_modal(ModalType::AboutVirtualMac)"
      pattern: "ModalType::AboutVirtualMac"
    - from: "src/modals.rs"
      to: "system_state.close_modal()"
      via: "X button click handler"
      pattern: "close_modal"
---

<objective>
Add "About VirtualMac" dialog accessible from the VirtualMac app menu.

Purpose: Complete REQ-1 - provide project credits, version info, and links in a macOS-style About dialog
Output: Draggable About VirtualMac dialog with version "2.0", links (GitHub, hosted site, creator profiles), and credits (Claude Code, GSD, Cursor, Rust + Leptos, creator)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-about-virtualmac/05-CONTEXT.md
@.planning/phases/05-about-virtualmac/05-RESEARCH.md
@src/system_state.rs
@src/menu_bar.rs
@src/modals.rs
@src/styles.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add ModalType variant and wire menu handler</name>
  <files>src/system_state.rs, src/menu_bar.rs</files>
  <action>
1. In `src/system_state.rs`:
   - Add `AboutVirtualMac` variant to `ModalType` enum (after `AboutThisMac`)

2. In `src/menu_bar.rs`:
   - Add `on_about_virtualmac` handler callback (similar pattern to existing `on_about` on line 38-41)
   - The handler should: close menu, call `system_state.show_modal(ModalType::AboutVirtualMac)`
   - Wire handler to existing "About VirtualMac" DropdownItem on line 111

Reference existing pattern for `on_about` handler (lines 38-41).
  </action>
  <verify>
`cargo check` passes with no errors
  </verify>
  <done>
ModalType::AboutVirtualMac exists; menu item handler wired and compiles
  </done>
</task>

<task type="auto">
  <name>Task 2: Create AboutVirtualMacDialog component with drag behavior</name>
  <files>src/modals.rs</files>
  <action>
1. Add match arm in `ModalOverlay` component for `ModalType::AboutVirtualMac`:
   - Render `AboutVirtualMacDialog` component
   - IMPORTANT: Render WITHOUT the click-to-close overlay handler (dialog has X button only)

2. Create `AboutVirtualMacDialog` component:
   - Position state: `(x, set_x)` and `(y, set_y)` signals, initially centered
   - Drag state: `(dragging, set_dragging)` signal
   - Drag start coordinates: signals for `drag_start_x/y` and `dialog_start_x/y`

3. Implement centering on mount (WASM only):
   - Get viewport dimensions from `web_sys::window().inner_width/height()`
   - Dialog dimensions: ~320px wide (hardcode for now)
   - Set initial x = (viewport_width - dialog_width) / 2
   - Set initial y = (viewport_height - dialog_height) / 3 (above center, like macOS)

4. Implement drag behavior:
   - On titlebar mousedown: store mouse position and dialog position, set dragging=true
   - Document-level mousemove handler: if dragging, update x/y based on delta
   - Document-level mouseup handler: set dragging=false
   - Constrain Y to >= 25.0 (MENU_BAR_HEIGHT) so titlebar stays accessible

5. Dialog structure (view!):
```
<div class="about-virtualmac-overlay">  // Full screen overlay, no click handler
  <div class="about-virtualmac-dialog" style=position>
    <div class="about-virtualmac-titlebar" on:mousedown=start_drag>
      <button class="about-close-btn" on:mousedown=stop_prop on:click=close>X</button>
    </div>
    <div class="about-virtualmac-content">
      // Icon (computer emoji)
      <div class="about-virtualmac-icon">...</div>
      // Title
      <div class="about-virtualmac-title">VirtualMac</div>
      // Version
      <div class="about-virtualmac-version">Version 2.0 (Build 2026.01.20)</div>
      // Tagline
      <div class="about-virtualmac-tagline">A macOS experience in the browser</div>
      // Primary links
      <div class="about-virtualmac-links">
        <a href="https://github.com/pRizz/virtual-mac" target="_blank" rel="noopener">GitHub</a>
        <a href="https://prizz.github.io/virtual-mac/" target="_blank" rel="noopener">Live Demo</a>
      </div>
      // Credits
      <div class="about-virtualmac-credits">
        <div class="about-credits-heading">Built with</div>
        // Each tool links to its site
        <a href="https://claude.ai/claude-code">Claude Code</a> 路
        <a href="https://github.com/pRizz/gsd">GSD</a> 路
        <a href="https://cursor.com">Cursor</a> 路
        <a href="https://leptos.dev">Rust + Leptos</a>
        // Vibe coded mention (subtle)
        <div class="about-vibe-coded">vibe coded</div>
      </div>
      // Creator
      <div class="about-virtualmac-creator">
        by Peter Ryszkiewicz
        <a href="https://github.com/pRizz" target="_blank" rel="noopener">GitHub</a> 路
        <a href="https://www.linkedin.com/in/peter-ryszkiewicz/" target="_blank" rel="noopener">LinkedIn</a>
      </div>
    </div>
  </div>
</div>
```

Use `#[cfg(target_arch = "wasm32")]` for drag event listeners setup (like window_manager.rs pattern).
For SSR/non-wasm, just render static dialog at fixed position.
  </action>
  <verify>
`cargo check` passes; component structure complete
  </verify>
  <done>
AboutVirtualMacDialog component created with:
- Draggable titlebar
- X close button (only way to close)
- Centered initial position
- All content: icon, title, version, tagline, links, credits, creator
  </done>
</task>

<task type="auto">
  <name>Task 3: Add CSS styling for About VirtualMac dialog</name>
  <files>src/styles.css</files>
  <action>
Add styles after the existing modal section (around line 610, after `.modal-button.disabled`):

```css
/* About VirtualMac Dialog
   ====================================== */

.about-virtualmac-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    /* No background dimming - more like a floating window */
    pointer-events: none;
}

.about-virtualmac-dialog {
    position: absolute;
    pointer-events: auto;
    width: 320px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(30px);
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    font-family: var(--font-family);
    overflow: hidden;
}

.about-virtualmac-titlebar {
    height: 36px;
    background: linear-gradient(180deg, #f6f6f6 0%, #e8e8e8 100%);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    padding: 0 10px;
    cursor: grab;
    user-select: none;
}

.about-virtualmac-titlebar:active {
    cursor: grabbing;
}

.about-close-btn {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: linear-gradient(180deg, #ff5f57 0%, #e5453c 100%);
    border: none;
    cursor: pointer;
    position: relative;
    font-size: 0;  /* Hide text */
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);
}

.about-close-btn::before {
    content: '\00d7';  /* X symbol */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 10px;
    font-weight: bold;
    color: transparent;
    line-height: 1;
}

.about-virtualmac-titlebar:hover .about-close-btn::before {
    color: #4d0000;
}

.about-virtualmac-content {
    padding: 24px;
    text-align: center;
}

.about-virtualmac-icon {
    font-size: 64px;
    margin-bottom: 12px;
    line-height: 1;
}

.about-virtualmac-title {
    font-size: 24px;
    font-weight: 500;
    color: #000;
    margin-bottom: 4px;
}

.about-virtualmac-version {
    font-size: 12px;
    color: #666;
    margin-bottom: 8px;
}

.about-virtualmac-tagline {
    font-size: 13px;
    color: #444;
    margin-bottom: 16px;
    font-style: italic;
}

.about-virtualmac-links {
    margin-bottom: 20px;
}

.about-virtualmac-links a {
    color: #0066cc;
    text-decoration: none;
    font-size: 14px;
    margin: 0 8px;
}

.about-virtualmac-links a:hover {
    text-decoration: underline;
}

.about-virtualmac-credits {
    font-size: 12px;
    color: #666;
    margin-bottom: 12px;
}

.about-credits-heading {
    font-size: 11px;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 6px;
}

.about-virtualmac-credits a {
    color: #555;
    text-decoration: none;
}

.about-virtualmac-credits a:hover {
    text-decoration: underline;
}

.about-vibe-coded {
    font-size: 10px;
    color: #999;
    margin-top: 6px;
}

.about-virtualmac-creator {
    font-size: 12px;
    color: #666;
    padding-top: 12px;
    border-top: 1px solid rgba(0, 0, 0, 0.08);
}

.about-virtualmac-creator a {
    color: #888;
    text-decoration: none;
    margin: 0 4px;
}

.about-virtualmac-creator a:hover {
    color: #0066cc;
    text-decoration: underline;
}

/* Dark mode support */
html.dark .about-virtualmac-dialog {
    background: rgba(40, 40, 40, 0.95);
}

html.dark .about-virtualmac-titlebar {
    background: linear-gradient(180deg, #3a3a3a 0%, #2a2a2a 100%);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

html.dark .about-virtualmac-title {
    color: #fff;
}

html.dark .about-virtualmac-tagline {
    color: #aaa;
}

html.dark .about-virtualmac-links a {
    color: #5ac8fa;
}

html.dark .about-virtualmac-version,
html.dark .about-virtualmac-credits,
html.dark .about-virtualmac-creator {
    color: #999;
}

html.dark .about-virtualmac-credits a,
html.dark .about-virtualmac-creator a {
    color: #aaa;
}

html.dark .about-virtualmac-creator {
    border-top-color: rgba(255, 255, 255, 0.08);
}
```

Adjust specific values (spacing, colors) as needed to match macOS aesthetic.
  </action>
  <verify>
`trunk build` succeeds; visual inspection shows macOS-style dialog
  </verify>
  <done>
Dialog styled with:
- Glassmorphism background
- Traffic light-style close button
- Centered text layout
- Blue primary links, subtle gray footer links
- Dark mode support
  </done>
</task>

</tasks>

<verification>
1. Build: `trunk build` completes without errors
2. Functional: Click VirtualMac menu -> About VirtualMac -> dialog opens
3. Drag: Can drag dialog by titlebar, stays above menu bar
4. Close: X button closes dialog; clicking outside does NOT close
5. Links: All links open in new tab (not navigate away)
6. Content: Shows computer emoji, VirtualMac title, version, tagline, links, credits with tools, creator
</verification>

<success_criteria>
- REQ-1 acceptance criteria met:
  - [x] Apple menu (VirtualMac submenu) contains "About VirtualMac" item
  - [x] Clicking opens a modal dialog
  - [x] Dialog shows: VirtualMac logo/icon, version number, build info
  - [x] Dialog shows credits: creator attribution, tools used
  - [x] Dialog matches macOS About dialog styling (centered, rounded corners)
  - [x] Dialog dismissable via close button (X only, not click outside)
- Dialog is draggable by titlebar
- All external links work and open in new tab
</success_criteria>

<output>
After completion, create `.planning/phases/05-about-virtualmac/05-01-SUMMARY.md`
</output>
