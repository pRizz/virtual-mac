---
phase: 05-finder-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/finder.rs
  - styles.css
autonomous: true

must_haves:
  truths:
    - "View mode buttons in toolbar respond to clicks"
    - "Clicking a view button changes the active button styling"
    - "View mode state is tracked in component"
    - "Finder window has no white padding around content"
  artifacts:
    - path: "src/finder.rs"
      provides: "ViewMode enum and state management"
      contains: "ViewMode"
    - path: "styles.css"
      provides: "Fixed finder padding"
      contains: ".finder-content"
  key_links:
    - from: "view mode buttons"
      to: "set_view_mode signal"
      via: "on:click handler"
      pattern: "set_view_mode"
---

<objective>
Add view mode state management to Finder and fix the white padding bug.

Purpose: Enable switching between icon/list/column views (infrastructure) and fix visual bug.
Output: ViewMode enum, signal, wired toolbar buttons, fixed padding.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-finder-polish/05-RESEARCH.md

@src/finder.rs
@styles.css (lines 720-978)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add ViewMode enum and signal</name>
  <files>src/finder.rs</files>
  <action>
Add ViewMode enum at the top of finder.rs:

```rust
#[derive(Clone, Copy, Debug, PartialEq, Default)]
pub enum ViewMode {
    #[default]
    Icon,
    List,
    Column,
    Gallery,
}
```

Inside the Finder component, add a signal for view mode:

```rust
let (view_mode, set_view_mode) = signal(ViewMode::Icon);
```

This establishes the infrastructure for view mode switching.
  </action>
  <verify>Build succeeds with `trunk build`</verify>
  <done>ViewMode enum defined, view_mode signal created in Finder component</done>
</task>

<task type="auto">
  <name>Task 2: Wire view mode buttons in toolbar</name>
  <files>src/finder.rs</files>
  <action>
Update the finder-view-btns section in the toolbar to:
1. Add on:click handlers that call set_view_mode with the appropriate ViewMode variant
2. Make the class dynamic based on current view_mode (active class when matching)

Replace the static view buttons with:

```rust
<div class="finder-view-btns">
    <button
        class=move || if view_mode.get() == ViewMode::Icon { "finder-view-btn active" } else { "finder-view-btn" }
        title="Icons"
        on:click=move |_| set_view_mode.set(ViewMode::Icon)
    >
        <span>"⊞"</span>
    </button>
    <button
        class=move || if view_mode.get() == ViewMode::List { "finder-view-btn active" } else { "finder-view-btn" }
        title="List"
        on:click=move |_| set_view_mode.set(ViewMode::List)
    >
        <span>"☰"</span>
    </button>
    <button
        class=move || if view_mode.get() == ViewMode::Column { "finder-view-btn active" } else { "finder-view-btn" }
        title="Columns"
        on:click=move |_| set_view_mode.set(ViewMode::Column)
    >
        <span>"❘❘❘"</span>
    </button>
    <button
        class=move || if view_mode.get() == ViewMode::Gallery { "finder-view-btn active" } else { "finder-view-btn" }
        title="Gallery"
        on:click=move |_| set_view_mode.set(ViewMode::Gallery)
    >
        <span>"▭"</span>
    </button>
</div>
```

The view mode buttons will now show which mode is active and respond to clicks.
  </action>
  <verify>Run `trunk serve`, click view buttons - active button styling should change</verify>
  <done>View mode buttons respond to clicks and show active state</done>
</task>

<task type="auto">
  <name>Task 3: Fix white padding bug</name>
  <files>styles.css</files>
  <action>
Investigate and fix the white padding bug in the Finder window.

The issue is likely in the .finder or .finder-content CSS. Check for:
1. Background color mismatches between container and content
2. Unnecessary padding or margins
3. Border-radius causing visible background bleed

Ensure .finder-content has:
```css
.finder-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--finder-bg);
    overflow: hidden;
    /* Remove any padding that could cause white space */
}
```

Also verify .finder-grid or other inner containers don't have conflicting backgrounds.

If the white is coming from the window container, ensure .finder fills its parent completely without gaps.
  </action>
  <verify>Run `trunk serve`, open Finder - no white padding visible around content area</verify>
  <done>Finder window displays without white padding artifacts</done>
</task>

</tasks>

<verification>
- `trunk build` completes without errors
- View mode buttons toggle active state on click
- No white padding visible in Finder window
</verification>

<success_criteria>
- ViewMode enum exists in finder.rs
- view_mode signal tracks current view
- Toolbar buttons show correct active state
- White padding bug is resolved
</success_criteria>

<output>
After completion, create `.planning/phases/05-finder-polish/05-01-SUMMARY.md`
</output>
